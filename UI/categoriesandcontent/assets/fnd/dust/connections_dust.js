(function(){dust.register("connections.dust",body_0);function body_0(chk,ctx){return chk.section(ctx.get("Connections"),ctx,{"block":body_1},null).write("<div id=\"LeftSideConnectionTree\"></div><div id=\"RightSideConnectionTree\"></div><button onclick=\"OpenAddConnectionForm()\">Add Connection</button><script type=\"text/javascript\">$(\".connectionAccordion\").click(function() {ActivateAccordion($(this));return false;});var ActivateAccordion = function($clickedObject) {var $myAccordion = $clickedObject.closest(\".accordion\");var $currActive = $myAccordion.find(\"div.content.active\");$currActive.toggleClass(\"active\");$dd = $clickedObject.closest(\"dd\");$div = $dd.find(\"div.content\");$div.toggleClass(\"active\");};var UpdateConnectionThisSide = function(connectionID) {tOP.ExecuteOperationWithForm(\"UpdateConnectionThisSideCategories\", { \"ConnectionID\": connectionID});};var SynchronizeConnectionCategories = function(connectionID) {tOP.ExecuteOperationWithForm(\"SynchronizeConnectionCategories\", { \"ConnectionID\": connectionID});};var OpenAddConnectionForm = function() {$(\"#OPInitiateIntegrationConnectionModal\").foundation('reveal', 'open');};var DeleteConnection = function(connectionID) {tOP.ExecuteOperationWithForm(\"DeleteConnection\", { \"ConnectionID\": connectionID});};var FinalizeConnection = function(connectionID) {tOP.ExecuteOperationWithForm(\"FinalizeConnectionAfterGroupAuthorization\", { \"ConnectionID\": connectionID });};var SetCategoryLinksFromTreeSelections = function(connectionID) {var leftNodes = $(\"#LeftSideConnectionTree\").dynatree('getSelectedNodes');var leftIDs = $.map(leftNodes, function(node) {return node.data.ID;});var rightNodes = $(\"#RightSideConnectionTree\").dynatree('getSelectedNodes');var rightIDs = $.map(rightNodes, function(node) {return node.data.ID;});if(leftIDs.length == 0 || rightIDs.length == 0)return;var addLink = {SourceCategoryID: leftIDs[0],TargetCategoryID: rightIDs[0],LinkingType: \"ONE2ONE\"};var conn = GetConnectionByID(connectionID);var existingLinks = $.map(conn.CategoryLinks, function(catLink) {return {SourceCategoryID: catLink.SourceCategoryID,TargetCategoryID: catLink.TargetCategoryID,LinkingType: catLink.LinkingType};});existingLinks.push(addLink);var parameterObj = {ConnectionID: connectionID,LinkItems: existingLinks};tOP.ExecuteOperationWithAjax(\"TheBall.Interface.SetCategoryLinkingForConnection\", parameterObj);};var PopulateTreeConnectors = function(connectionID) {var conn = GetConnectionByID(connectionID);$(\"#LeftSideConnectionTree\").dynatree({onActivate: function(node) {},persist: false,children: conn.UI_ThisSideCategories,checkbox: true,selectMode: 1});$(\"#RightSideConnectionTree\").dynatree({onActivate: function(node) {},persist: false,children: conn.UI_OtherSideCategories,checkbox: true,selectMode: 1});};</script>");}function body_1(chk,ctx){return chk.write("<dl class=\"accordion\" data-accordion>").section(ctx.get("CollectionContent"),ctx,{"block":body_2},null).write("</dl>");}function body_2(chk,ctx){return chk.write("<dd id=\"dd").reference(ctx.get("ID"),ctx,"h").write("\"><a href=\"#\" class=\"connectionAccordion\">").reference(ctx.get("Description"),ctx,"h").write("</a><div id=\"conAcc").reference(ctx.get("ID"),ctx,"h").write("\" class=\"content\"><button onclick=\"FinalizeConnection('").reference(ctx.get("ID"),ctx,"h").write("')\">Finalize connection: ").reference(ctx.get("Description"),ctx,"h").write("</button><button onclick=\"DeleteConnection('").reference(ctx.get("ID"),ctx,"h").write("')\">Delete connection: ").reference(ctx.get("Description"),ctx,"h").write("</button><button onclick=\"UpdateConnectionThisSide('").reference(ctx.get("ID"),ctx,"h").write("')\">Update this side ").reference(ctx.get("Description"),ctx,"h").write("</button><button onclick=\"SynchronizeConnectionCategories('").reference(ctx.get("ID"),ctx,"h").write("')\">Synchronize Categories ").reference(ctx.get("Description"),ctx,"h").write("</button><button onClick=\"PopulateTreeConnectors('").reference(ctx.get("ID"),ctx,"h").write("')\">Populate Tree Connectors</button><button onclick=\"SetCategoryLinksFromTreeSelections('").reference(ctx.get("ID"),ctx,"h").write("')\">Set Category Links</button><table><tr><th>Linking Info</th></tr>").section(ctx.get("CategoryLinks"),ctx,{"block":body_3},null).write("</table></div></dd>");}function body_3(chk,ctx){return chk.write("<tr><td>").reference(ctx.get("SourceCategoryID"),ctx,"h").write(" - ").reference(ctx.get("TargetCategoryID"),ctx,"h").write(" - ").reference(ctx.get("LinkingType"),ctx,"h").write("</td></tr>");}return body_0;})();