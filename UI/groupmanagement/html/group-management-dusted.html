<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Admin-Group</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- For sample logo only-->
    <!--Remove if you no longer need this font-->
    <link href="http://fonts.googleapis.com/css?family=Aguafina+Script" rel="stylesheet" type="text/css" >
    <!--For sample logo only-->

    <link rel="stylesheet" type="text/css" href="../assets/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/lib/font-awesome/css/font-awesome.css">
    <script src="../assets/lib/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../assets/js/site.js" type="text/javascript"></script>
    <link href="../assets/lib/datepicker/css/datepicker.css" rel="stylesheet">
    <link href="../assets/lib/colorpicker/css/colorpicker.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-timepicker/compiled/timepicker.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-formhelpers/css/bootstrap-formhelpers.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-notify/bootstrap-notify.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-notify/alert-bangtidy.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-notify/alert-blackgloss.css" rel="stylesheet">
    <link href="../assets/lib/bootstrap-spinner/bootstrap-spinner.css" rel="stylesheet">
    <link href="../assets/css/bootstrap-fileupload.css" rel="stylesheet">
    <link href="../assets/css/isotope.css" rel="stylesheet">
    <link href='../assets/lib/fullcalendar-1.5.3/fullcalendar/fullcalendar.css' rel='stylesheet' type='text/css'/>
    <link href='../assets/lib/fullcalendar-1.5.3/fullcalendar/fullcalendar.print.css' rel='stylesheet' type='text/css' media='print' />



    <script src="../assets/lib/jquery.isotope.min.js"></script>
    <script src="../assets/lib/datepicker/js/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="../assets/lib/colorpicker/js/bootstrap-colorpicker.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-toggle-buttons/static/js/jquery.toggle.buttons.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-timepicker/js/bootstrap-timepicker.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-countries.en_US.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-countries.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-timezones.codes.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-timezones.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-languages.codes.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-languages.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-states.en_US.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-formhelpers/js/bootstrap-formhelpers-states.js" type="text/javascript"></script>
    <script src="../assets/lib/jquery-qrcode/jquery.qrcode.min.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-notify/bootstrap-notify.js" type="text/javascript"></script>
    <script src="../assets/lib/bootstrap-spinner/bootstrap-spinner.js" type="text/javascript"></script>
    <script src="../assets/js/bootstrap-fileupload.js" type="text/javascript"></script>
    <script src='../assets/lib/fullcalendar-1.5.3/fullcalendar/fullcalendar.js' type='text/javascript'></script>

    <!--WYSI HTML EDITOR-->
    <link rel="stylesheet" type="text/css" href="../assets/lib/bootstrap-wysihtml5/dist/bootstrap-wysihtml5-0.0.2.css">
    <script src="../assets/lib/bootstrap-wysihtml5/lib/js/wysihtml5-0.3.0.js"></script>
    <script src="../assets/lib/bootstrap-wysihtml5/dist/bootstrap-wysihtml5-0.0.2.min.js"></script>

    <!-- MarkdownDeep Editor -->
    <link rel="stylesheet" href="../assets/lib/markdowndeep/mdd_styles.css">
    <script type="text/javascript" src="../assets/lib/markdowndeep/MarkdownDeepLib.min.js"></script>

	<script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
	<script src="../assets/js/leaflet.markercluster.js"></script>
	<link rel="stylesheet" href="../assets/css/MarkerCluster.css" />
	<link rel="stylesheet" href="../assets/css/MarkerCluster.Default.css" />

    <link rel="stylesheet" type="text/css" href="../assets/css/admin-theme.css">

    <style type="text/css">
            /*h2 { margin-top: 2em; }*/
        #dropdown-buttons .btn-group:first-child { margin-left: 0px; }
        #dropdown-buttons .btn-group { margin-left: 31px; }
        #dropdown-buttons2 .btn-group:first-child { margin-left: 0px; }
        #dropdown-buttons2 .btn-group { margin-left: 18px; }
        .sample-buttons .btn-group {
            width: 115px;
            height: 40px;
            margin: 0em;
        }
        .filter-demo-item {
            /*float: left;*/
            width: 50px;
            height: 50px;
            margin: .5em;
            background: #667;
            overflow: hidden;
        }
            /**** Isotope Filtering ****/

        .isotope-item {
            z-index: 2;
        }

        .isotope-hidden.isotope-item {
            pointer-events: none;
            z-index: 1;
        }

            /**** Isotope CSS3 transitions ****/
        .isotope {
            margin-bottom: 30px;
        }
        .isotope,
        .isotope .isotope-item {
            -webkit-transition-duration: 0.8s;
            -moz-transition-duration: 0.8s;
            -ms-transition-duration: 0.8s;
            -o-transition-duration: 0.8s;
            transition-duration: 0.8s;
        }

        .isotope {
            -webkit-transition-property: height, width;
            -moz-transition-property: height, width;
            -ms-transition-property: height, width;
            -o-transition-property: height, width;
            transition-property: height, width;
        }

        .isotope .isotope-item {
            -webkit-transition-property: -webkit-transform, opacity;
            -moz-transition-property:    -moz-transform, opacity;
            -ms-transition-property:     -ms-transform, opacity;
            -o-transition-property:      -o-transform, opacity;
            transition-property:         transform, opacity;
        }

            /**** disabling Isotope CSS3 transitions ****/

        .isotope.no-transition,
        .isotope.no-transition .isotope-item,
        .isotope .isotope-item.no-transition {
            -webkit-transition-duration: 0s;
            -moz-transition-duration: 0s;
            -ms-transition-duration: 0s;
            -o-transition-duration: 0s;
            transition-duration: 0s;
        }

        .loading {
            margin-right: .25em;
        }
        #location-map{
            height: 400px;
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Dust + xml -->
    <script src="../assets/js/dust-full-1.1.1.js"></script>
    <script src="../assets/js/xml2json.js"></script>


    <script>
	    function GetLayerLabelText(textvalue, iconUrl)
            {
                if(iconUrl != null)
                    return "<img src='" + iconUrl + "' height='16' width='16'></img> " + textvalue;
                return textvalue;
            }


		var map;
        var mediamap;
        // Cluster markers - only thing that has actual map-visible markers
        var markers = new L.MarkerClusterGroup();
        var MarkerTypes = ["Activities","News", "Projects","Events","Blogs"];
        // Marker arrays
        $.each(MarkerTypes, function(i,item){
            window[item+"Markers"] = new Array();
            window[item+"MarkerIcon"] = L.icon({
                iconUrl: '../assets/img/oip-markers/map-marker-'+item+'.png',
                iconSize: [25, 41],
                iconAnchor: [12, 40],
                popupAnchor: [-3, -76],
                shadowUrl: '../assets/img/oip-markers/marker-shadow.png',
                shadowSize: [41, 41],
                shadowAnchor: [12, 40]
            });
        })
	</script>
    <script type='text/javascript'>

        $(document).ready(function() {

            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            /*
             Colors
             #54a0f6
             #a93018
             #90c654
             #A97518
             #41B3DF
             */

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                editable: true,
                events: [
                    {
                        title: 'All Day Event',
                        start: new Date(y, m, 1),
                        color: '#54a0f6'
                    },
                    {
                        title: 'Long Event',
                        start: new Date(y, m, d-5),
                        end: new Date(y, m, d-2),
                        color: '#a93018'
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: new Date(y, m, d-3, 16, 0),
                        allDay: false,
                        color: '#41B3DF'
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: new Date(y, m, d+4, 16, 0),
                        allDay: false,
                        color: '#A97518'
                    },
                    {
                        title: 'Meeting',
                        start: new Date(y, m, d, 10, 30),
                        allDay: false,
                        color: '#54a0f6'
                    },
                    {
                        title: 'Lunch',
                        start: new Date(y, m, d, 12, 0),
                        end: new Date(y, m, d, 14, 0),
                        allDay: false,
                        color: '#90c654'
                    },
                    {
                        title: 'Birthday Party',
                        start: new Date(y, m, d+1, 19, 0),
                        end: new Date(y, m, d+1, 22, 30),
                        allDay: false,
                        color: '#54a0f6'
                    },
                    {
                        title: 'Click for Google',
                        start: new Date(y, m, 28),
                        end: new Date(y, m, 29),
                        url: 'http://google.com/',
                        color: '#54a0f6'
                    }
                ]
            });

        });

    </script>
    <style type='text/css'>

        #calendar {
            width: 100%;
            margin: 0 auto;
        }

    </style>
    <style type="text/css">
        .group-management .navbar .navbar-inner {
            padding: 0;
            border-top: darkblue solid 3px;
        }
    </style>
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
</head>

<!--[if lt IE 7 ]> <body class="ie ie6"> <![endif]-->
<!--[if IE 7 ]> <body class="ie ie7 "> <![endif]-->
<!--[if IE 8 ]> <body class="ie ie8 "> <![endif]-->
<!--[if IE 9 ]> <body class="ie ie9 "> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<body class="group-management">
<!--<![endif]-->

<div class="dustph" id="navbar_placeholder">navbar-jeroen</div>
<div class="dustph" id="main-menu_placeholder">mainmenu-jeroen</div>
<div class="dustph" id="sidebar-nav_placeholder">sidebar</div>
<div class="dustph" id="content_placeholder">content xyz</div>

<script>

    var fixContentUrl = function(originalUrl)
    {
        if(window.location.host != "localhost:63342")
            return originalUrl;
        return originalUrl.replace("/auth/account/", "../../../ExtContent/auth/account/");
    };
    $("#content_placeholder").data({
        datasource: {
            GroupContainerSource: ["../../AaltoGlobalImpact.OIP/GroupContainer/default", null],
            Locations: ["../../AaltoGlobalImpact.OIP/AddressAndLocationCollection/MasterCollection", null],
            CategoriesSource: ["../../AaltoGlobalImpact.OIP/CategoryCollection/MasterCollection.json", null, "CategoryCollection"]
        }
    });
    $("#navbar_placeholder").data({
        datasource: {
            GroupContainerSource: ["../../AaltoGlobalImpact.OIP/GroupContainer/default", null],
            AccountContainer: [fixContentUrl("/auth/account/AaltoGlobalImpact.OIP/AccountContainer/default"), null]
        }
    });

</script>

<script language="javascript">

    var xml2JSObj = function(xmlResponse) {
        var dom;
        if (window.DOMParser) {
            parser = new DOMParser();
            dom = parser.parseFromString(xmlResponse, "text/xml");
        }
        else // Internet Explorer
        {
            dom = new ActiveXObject("Microsoft.XMLDOM");
            dom.async = false;
            dom.loadXML(xmlResponse);
        }
        var json = xml2json(dom, "  ");
        //alert(json);
        var jsonResult = jQuery.parseJSON(json);
        return jsonResult;
    };
    var renderDustFromResponse = function(placeholderID, dusttemplatename, templateContent, dataObject) {
        //var templateID = placeholderID.replace("_placeholder", "");
        //var templateCompiled = dust.compile(templateContent, templateID);
        //dust.loadSource(templateCompiled);
        dust.loadSource(templateContent);
        dust.render(dusttemplatename, dataObject, function(err, out) {
            $("#" + placeholderID).html(out);
        });
    };

    dustifyph = function() {
        var placeholderID = $(this).attr("id");
        var dataSources = $(this).data("datasource");
        //alert(placeholderID);
        var fetchContentPromises = [];
        var dataSourceKeys = [];
        if(dataSources != null) {
            for(var key in dataSources)
            {
                dataSourceKeys.push(key);
                fetchContentPromises.push(dataSources[key][1]);
            }
        }
        var templateID = placeholderID.replace("_placeholder", "");
        var dustfilename = templateID + ".dust";
        var dustcompiled = templateID + "_dust.js";
        var dusttemplatename = dustfilename;
        fetchContentPromises.push($.ajax({ url: dustcompiled,cache:false}));
        $.when.apply($, fetchContentPromises).then(function() {
            var dataObject = {};
            var dustTemplateContent;
            if(dataSourceKeys.length > 0) {
                for(var i = 0; i < arguments.length - 1; i++)
                {
                    var key = dataSourceKeys[i];
                    var ds = dataSources[key];
                    var url = ds[0];
                    var jsonRootObjectName = ds[2];
                    var isJSON = url.endsWith(".json");
                    var response = arguments[i][0];
                    var status = arguments[i][1];
                    var request = arguments[i][2];
                    var jsonObj;
                    if(isJSON)
                    {
                        jsonObj = { };
                        jsonObj[jsonRootObjectName] = response;
                    } else {
                        jsonObj = xml2JSObj(response);
                    }
                    var eTag = request.getResponseHeader("ETag")
                    if(eTag == null)
                        eTag = "DefaultUndefined";
                    jsonObj["ETag"] = eTag;
                    dataObject[key] = jsonObj;
                }
                dustTemplateContent = arguments[arguments.length - 1][0];
            } else
                dustTemplateContent = arguments[0];
            renderDustFromResponse(placeholderID, dusttemplatename, dustTemplateContent, dataObject);

        });
        //var dataObject = null;
    };
    var DataPromiseCache = {};
    var replaceDatasourceUrlsWithAjaxPromises = function()
    {
        var dataSources = $(this).data("datasource");
        if(dataSources == null)
            return;
        for(var key in dataSources)
        {
            var url = dataSources[key][0];
            var urlPromise = DataPromiseCache[url];
            if(urlPromise == null)
            {
                urlPromise = $.ajax({ url: url, cache:false});
                DataPromiseCache[url] = urlPromise;
            }
            dataSources[key][1] = urlPromise;
        }
    };
    $(function() {

        $(".dustph").each(replaceDatasourceUrlsWithAjaxPromises).each(dustifyph);
    });
</script>

<script src="categories_dust.js"></script>
<script src="identity_dust.js"></script>
<script src="../assets/dust/fileupload_dust.js"></script>
<script src="../assets/dust/textinput_singleline_dust.js"></script>
<script src="../assets/dust/textinput_multiline_dust.js"></script>
<script src="../assets/dust/textinput_multiline_markdown_dust.js"></script>

<script>
    function getData( val ){

        // Return a promise from the cache (if available)
        // or create a new one (a jqXHR object) and store it in the cache.
        var promise = cache[val];
        if (!promise) {
            promise = $.ajax('/foo/', {
                data: { value: val },
                dataType: 'json'
            });
            cache[val] = promise;
        }
        return promise;
    }

</script>

<script src="../assets/lib/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript">
    $("[rel=tooltip]").tooltip();
    $(function() {
        $('.demo-cancel-click').click(function(){return false;});
    });
</script>

<script type="text/javascript">
    if (typeof String.prototype.endsWith !== 'function') {
        String.prototype.endsWith = function(suffix) {
            return this.indexOf(suffix, this.length - suffix.length) !== -1;
        };
    }
</script>

</body>
</html>
