<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>

<div class="content" id="groups-panel">
    <h2> Current Memberships: </h2>
    <table id="groups-table">
        <tr>
            <th>Group</th>
            <th>Site</th>
        </tr>
    </table>
    <br>
    <h3>Add new entry</h3>
    <form>
        <div class="row">
            <div class="large-12 columns"><label>Group name</label> <input type="text"
                                                                           placeholder="e.g. Aalto Bowling Association" id="form_new_group_name"/>
            </div>
        </div>

        <div class="row">
            <div class="large-12 columns"><label>URL</label> <input type="text"
                                                                    placeholder="e.g. www.aaltobowling.fi" id="form_new_group_url"/>
            </div>
        </div>

        <div class="row">
            <div class="large-12 columns"><label>Notes</label> <textarea
                    placeholder="Tell us a little something about the group"></textarea></div>
        </div>
        <a href="" class="button" id="create-group-submit">Create</a>
    </form>
    </div>

<script src="js/jquery.js"></script>

<!-- +++Document Ready functions begins++++++++++++++++++++++++++++++++++++++++++++-->
<script>
    $(document).ready(function () {

        populate_groups_table();

        function populate_groups_table (){
      // first we initialize (clear) the table:
            $("#groups-table td").remove();
     //--begins: Populating the list of websites TopLeft Navbar and Populates the GroupTables on the Groups TAB
        $.getJSON('json/site_settings.json', function(data) {
            var output="";
            var output2="";
            for (var i in data.sites) {
                //noinspection JSUnfilteredForInLoop
                output+="<li><a href='" + data.sites[i].url + "' target='_blank' style='text-transform:capitalize !important;'>" +
                        data.sites[i].name + "</a></li>";
                output2+="<tr><td style='text-transform:capitalize !important;'>" + data.sites[i].name + "</td>" +
                        "<td style='text-transform:lowercase !important;'>" + data.sites[i].url+"</td></tr>";
            }//ends for loop
            $("#groups-table").append(output2);
            $("#site-dropdown-list").append(output);
        })
        };//--ends: Populating the list of websites TopLeft Navbar and Populates the GroupTables on the Groups TAB

        $("#create-group-button").click(function () {
            $('#create-group-modal').foundation('reveal', 'open');
        });


        $("#create-group-submit").click(function () {
            var new_group_name = $("#form_new_group_name").val();
            var new_group_url = $("#form_new_group_url").val();
            $.ajax({
                global: false,
                type: "POST",
                //async: false,
                dataType: "json",
                data: ({
                    name: new_group_name,
                    site: new_group_url
                }),
                url: 'read-write.php'
            });
            //populate_groups_table();
            $('#groups-table tr:last').after('<tr><td>new_group_name</td><td>new_group_url</td></tr>');
            //$('#alert-groupadded-successful').foundation('reveal', 'open');
        });

        $("#close-alert-groupadded-successful").click(function () {
            //location.reload();    ---->refreshes the page to the current URL
            document.location.href='#groups-panel'; //can redirect to any URL you want
        });


    });</script>
<!-- +++Document Ready functions ends ++++++++++++++++++++++++++++++++++++++++++++-->


</body>
</html>